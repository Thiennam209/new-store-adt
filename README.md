$projectname="adtstore"
$appreg="adtstore"
az account set --subscription SPD.MTV.2022
az ad sp create-for-rbac --name ${appreg} --role Contributor --scopes /subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938 --skip-assignment > AppCredentials.txt
$objectid=$(az ad sp list --display-name ${appreg} --query [0].id --output tsv)
$userid=$(az ad signed-in-user show --query id -o tsv)
az group create --name ${projectname}-rg --location eastus
az deployment group create -f azuredeploy.bicep -g ${projectname}-rg --parameters projectName=${projectname} userId=${userid} appRegObjectId=${objectid} > ARM_deployment_out.txt
az deployment group show -n azuredeploy -g ${projectname}-rg --query properties.outputs.importantInfo.value > Azure_config_settings.txt
az iot hub connection-string show --resource-group ${projectname}-rg >> Azure_config_settings.txt








G:\Fsoft\Azure\ADT\StoreLayout\NewARM_Template_Store\azuredeploy.bicep(353,5) : Warning no-unnecessary-dependson: Remove unnecessary dependsOn entry 'iot'. [https://aka.ms/bicep/linter/no-unnecessary-dependson]

ERROR: {"code": "InvalidTemplateDeployment", "message": "The template deployment failed with multiple errors. Please see details for more information."}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstoreHubj6tzb32znm", "message": "Resource 'adtstoreHubj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Devices/IotHubs", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstorej6tzb32znm", "message": "Resource 'adtstorej6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Storage/storageAccounts", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstoreadtj6tzb32znm", "message": "Resource 'adtstoreadtj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.DigitalTwins/digitalTwinsInstances", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstoresignalrj6tzb32znm", "message": "Resource 'adtstoresignalrj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.SignalRService/signalR", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstorefarmj6tzb32znm", "message": "Resource 'adtstorefarmj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/serverfarms", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstorefuncappj6tzb32znm", "message": "Resource 'adtstorefuncappj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Web/sites", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstoreappinsightj6tzb32znm", "message": "Resource 'adtstoreappinsightj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.Insights/components", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstorecltj6tzb32znm", "message": "Resource 'adtstorecltj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/topics", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}

Inner Errors:
{"code": "RequestDisallowedByPolicy", "target": "adtstoreegingestj6tzb32znm", "message": "Resource 'adtstoreegingestj6tzb32znm' was disallowed by policy. Policy identifiers: '[{\"policyAssignment\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32\"},\"policyDefinition\":{\"name\":\"Forced_Tags_Project\",\"id\":\"/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad\"}}]'.", "additionalInfo": [{"type": "PolicyViolation", "info": {"evaluationDetails": {"evaluatedExpressions": [{"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "microsoft.compute/virtualmachines/extensions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Web/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.DevTestLab/schedules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Logic/workflows", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Automation/AutomationAccounts/runbooks", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Automation/AutomationAccounts", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.OperationsManagement/solutions", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.OperationsManagement/managementassociations", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Network/localNetworkGateways", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Network/connections", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "microsoft.compute/virtualmachinescalesets", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "type", "path": "type", "expressionValue": "Microsoft.EventGrid/systemTopics", "targetValue": "Microsoft.Insights/dataCollectionRules", "operator": "NotEquals"}, {"result": "True", "expressionKind": "Field", "expression": "tags[ApplicationName]", "path": "tags[ApplicationName]", "targetValue": "false", "operator": "Exists"}]}, "policyDefinitionId": "/providers/Microsoft.Management/managementGroups/f01e930a-b52e-42b1-b70f-a8882b5d043b/providers/Microsoft.Authorization/policyDefinitions/cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionName": "cccf7d4f-9a75-4dfb-838c-06f8370571ad", "policyDefinitionDisplayName": "Forced_Tags_Project", "policyDefinitionEffect": "deny", "policyAssignmentId": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938/providers/Microsoft.Authorization/policyAssignments/a07d578ec99e404fb28deb32", "policyAssignmentName": "a07d578ec99e404fb28deb32", "policyAssignmentDisplayName": "Forced_Tags_Project", "policyAssignmentScope": "/subscriptions/851a3e64-bc9a-4d4c-b20e-fde1b7055938", "policyAssignmentParameters": {"tagName1": "ApplicationName", "tagName2": "ProjectID", "tagName3": "OwnerService"}}}]}
PS G:\Fsoft\Azure\ADT\StoreLayout\NewARM_Template_Store> az deployment group show -n azuredeploy -g ${projectname}-rg --query properties.outputs.importantInfo.value > Azure_config_settings.txt
ERROR: (DeploymentNotFound) Deployment 'azuredeploy' could not be found.
Code: DeploymentNotFound
